{% extends "base.html" %}
{% block content %}

<div class="mb-5">
    <h4>Registered Users</h4>
    <table class="table">
        <tr>
            <th>Username</th>
            <th>Name</th>
            <th>Mail</th>
            <th>Permissions</th>
            <th>Elections</th>
            <th></th>
        </tr>
        {% for u in allusers %}
            <tr>
                <td>{{u.username}}</td>
                <td>{{u.name}}</td>
                <td>{{u.email}}</td>
                <td>{{u.permissions}}</td>
                <td>{{u.elections | length}}</td>
                {% if u.is_admin() %}
                    <td class="text-end"><button type="button" class="btn btn-secondary" disabled>Edit User</button></td>
                {% else %}
                    <td class="text-end"><a href="/useredit/{{u.username}}"><button type="button" class="btn btn-info">Edit User</button></a></td>
                {% endif %}
            </tr>
        {% endfor %}
    </table>
</div>


<div class="mb-5">
    <h4>Create a New User</h4>

    <form action="/adminpanel/createuser" method="post">
        <input type="text" id="name" name="name" class="form-control" placeholder="Display Name" class="textfield" required>
        <input type="text" id="username" name="username" class="form-control" placeholder="Username" required>
        <input type="email" id="email" name="email" class="form-control" placeholder="E-Mail" class="textfield" required>
        <input type="password" id="passwd" name="passwd" class="form-control" placeholder="Password" class="textfield" required autocomplete="new-password">
        <br>
        <input class="form-check-input" type="checkbox" value="accept" id="tnc_accept" name="tnc_accept" required>
        <label class="form-check-label" for="tnc_accept">
            I have informed the user about our <a href="{{config.GOODVOTEX_TERMS_CONDITIONS_URL}}">Terms and Conditions</a> and confirm that the user agrees.
        </label>
        <br><br>
        <input type="submit" id="registerbtn" value="Register" class="btn btn-success">
    </form>
</div>

{% endblock %}
